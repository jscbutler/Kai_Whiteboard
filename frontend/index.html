<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Kai Family Whiteboard</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="icons.js"></script>
    <style>
        /* Custom Icon Styles */
        .floating-icon, .drifting-icon, .falling-icon, .twinkling-icon {
            position: absolute;
            width: 2rem;
            height: 2rem;
            pointer-events: none;
        }
        
        .floating-icon {
            animation: floatDecor 4s ease-in-out infinite;
        }
        
        .floating-icon svg, .drifting-icon svg, .falling-icon svg, .twinkling-icon svg {
            width: 100%;
            height: 100%;
        }
        
        .floating-icon.dancing {
            animation: dance 2s ease-in-out infinite;
            transform-origin: bottom center;
        }
        
        .drifting-icon {
            animation: drift 15s linear infinite;
        }
        
        .falling-icon {
            animation: fall 10s linear infinite;
        }
        
        .twinkling-icon {
            animation: twinkle 2s ease-in-out infinite;
        }
        
        .icon-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .icon-btn svg {
            width: 1.25rem;
            height: 1.25rem;
        }
        
        .icon-large {
            width: 2rem;
            height: 2rem;
        }
        /* Kiosk mode styles */
        body {
            overflow: hidden;
            touch-action: none;
            user-select: none;
        }
        
        /* Kai Sleep Mode Animations */
        @keyframes breathe {
            0%, 100% { transform: scale(1) translateY(0); }
            50% { transform: scale(1.02) translateY(-5px); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        @keyframes wiggle {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }
        
        @keyframes glow {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(59, 130, 246, 0.5)); }
            50% { filter: drop-shadow(0 0 40px rgba(59, 130, 246, 0.8)); }
        }
        
        @keyframes blink {
            0%, 90%, 100% { transform: scaleY(1); }
            95% { transform: scaleY(0.1); }
        }
        
        .kai-sleep-avatar {
            animation: breathe 4s ease-in-out infinite, glow 3s ease-in-out infinite;
        }
        
        .kai-antennae {
            animation: wiggle 3s ease-in-out infinite;
            transform-origin: bottom center;
        }
        
        .kai-eyes {
            animation: blink 4s ease-in-out infinite;
        }
        
        /* Sleep mode ambient effects */
        .ambient-bubble {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2), transparent);
            animation: float 6s ease-in-out infinite;
            pointer-events: none;
        }
        
        /* Regular Kai panel animations */
        .kai-avatar {
            animation: float 3s ease-in-out infinite;
        }
        
        /* Sleep screen fade */
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.5s ease;
        }
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }
        
        /* Scrollbar for task list */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }
        
        /* Theme transition */
        .theme-transition {
            transition: all 0.8s ease-in-out;
        }
        
        /* Swipe hint animation */
        @keyframes swipeHint {
            0%, 100% { transform: translateX(0); opacity: 0.3; }
            50% { transform: translateX(20px); opacity: 0.8; }
        }
        .swipe-hint {
            animation: swipeHint 2s ease-in-out infinite;
        }
        
        /* Floating decorative elements */
        @keyframes floatDecor {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(5deg); }
            50% { transform: translateY(-10px) rotate(0deg); }
            75% { transform: translateY(-30px) rotate(-5deg); }
        }
        
        @keyframes drift {
            0% { transform: translateX(-100px) translateY(0); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateX(calc(100vw + 100px)) translateY(-50px); opacity: 0; }
        }
        
        @keyframes fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(calc(100vh + 100px)) rotate(360deg); opacity: 0; }
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        @keyframes dance {
            0%, 100% { transform: rotate(-10deg) translateY(0); }
            25% { transform: rotate(10deg) translateY(-10px); }
            50% { transform: rotate(-5deg) translateY(0); }
            75% { transform: rotate(15deg) translateY(-5px); }
        }
        
        .floating-decor {
            position: absolute;
            font-size: 2rem;
            pointer-events: none;
            animation: floatDecor 4s ease-in-out infinite;
        }
        
        .drifting-decor {
            position: absolute;
            font-size: 2.5rem;
            pointer-events: none;
            animation: drift 15s linear infinite;
        }
        
        .falling-decor {
            position: absolute;
            font-size: 2rem;
            pointer-events: none;
            animation: fall 10s linear infinite;
        }
        
        .twinkling-decor {
            position: absolute;
            font-size: 1.5rem;
            pointer-events: none;
            animation: twinkle 2s ease-in-out infinite;
        }
        
        .dancing-decor {
            position: absolute;
            font-size: 3rem;
            pointer-events: none;
            animation: dance 2s ease-in-out infinite;
            transform-origin: bottom center;
        }
    </style>
</head>
<body class="bg-gray-900 text-white h-screen w-screen overflow-hidden">
    <div id="app" class="h-full w-full relative">
        
        <!-- SLEEP MODE - Kai Front and Center with Themes -->
        <transition name="fade">
            <div v-if="sleepMode" 
                 @click="wakeUp"
                 @touchstart="handleTouchStart"
                 @touchend="handleTouchEnd"
                 class="absolute inset-0 z-50 flex theme-transition"
                 :class="currentTheme.background">
                
                <!-- Ambient bubbles (theme colored) -->
                <div class="ambient-bubble w-32 h-32 top-10 left-10 opacity-30" :style="bubbleStyle(0)"></div>
                <div class="ambient-bubble w-24 h-24 top-40 right-20 opacity-20" :style="bubbleStyle(1)"></div>
                <div class="ambient-bubble w-40 h-40 bottom-20 left-1/4 opacity-25" :style="bubbleStyle(2)"></div>
                <div class="ambient-bubble w-20 h-20 top-1/3 left-1/3 opacity-15" :style="bubbleStyle(3)"></div>
                
                <!-- Theme decorations - Custom SVG Icons -->
                <div class="absolute top-4 left-4 w-16 h-16 opacity-30" v-html="getThemeIcon()"></div>
                <div class="absolute bottom-4 right-4 w-16 h-16 opacity-30" v-html="getThemeIcon()"></div>
                
                <!-- Floating themed decorations - SVG Icons -->
                <div v-if="currentTheme.id === 'ireland'" class="theme-decorations">
                    <div class="floating-icon" style="top: 15%; left: 8%; animation-delay: 0s;" v-html="icons.shamrock"></div>
                    <div class="floating-icon" style="top: 60%; left: 5%; animation-delay: 1s; color: #10b981;" v-html="icons.shamrock"></div>
                    <div class="floating-icon" style="top: 25%; right: 10%; animation-delay: 2s; color: #059669;" v-html="icons.shamrock"></div>
                    <div class="drifting-icon" style="top: 40%; animation-delay: 0s; color: rgba(255,255,255,0.4);" v-html="icons.cloud"></div>
                    <div class="drifting-icon" style="top: 70%; animation-delay: 5s; color: rgba(255,255,255,0.3);" v-html="icons.rain"></div>
                </div>
                
                <div v-if="currentTheme.id === 'spain'" class="theme-decorations">
                    <div class="floating-icon dancing" style="bottom: 30%; left: 10%; color: #fbbf24;" v-html="icons.dancer"></div>
                    <div class="floating-icon dancing" style="bottom: 20%; right: 15%; animation-delay: 0.5s; color: #fbbf24;" v-html="icons.dancer"></div>
                    <div class="floating-icon" style="top: 20%; left: 15%; animation-delay: 0s; color: #fbbf24;" v-html="icons.sun"></div>
                    <div class="floating-icon" style="top: 50%; right: 8%; animation-delay: 1.5s; color: #f59e0b;" v-html="icons.sun"></div>
                    <div class="drifting-icon" style="top: 35%; animation-delay: 2s; color: rgba(255,255,255,0.4);" v-html="icons.sun"></div>
                </div>
                
                <div v-if="currentTheme.id === 'thailand'" class="theme-decorations">
                    <div class="floating-icon" style="top: 10%; left: 12%; animation-delay: 0s; color: #fbbf24;" v-html="icons.temple"></div>
                    <div class="floating-icon" style="top: 45%; left: 5%; animation-delay: 1.2s; color: #fbbf24;" v-html="icons.sun"></div>
                    <div class="floating-icon" style="top: 30%; right: 12%; animation-delay: 2s; color: #fbbf24;" v-html="icons.temple"></div>
                    <div class="floating-icon" style="bottom: 35%; right: 8%; animation-delay: 0.8s; color: #fbbf24;" v-html="icons.temple"></div>
                    <div class="drifting-icon" style="top: 55%; animation-delay: 3s; color: rgba(255,255,255,0.4);" v-html="icons.cloud"></div>
                </div>
                
                <div v-if="currentTheme.id === 'halloween'" class="theme-decorations">
                    <div class="floating-icon" style="top: 12%; left: 10%; animation-delay: 0s; color: #ea580c;" v-html="icons.pumpkin"></div>
                    <div class="floating-icon" style="top: 55%; left: 6%; animation-delay: 1s; color: #a855f7;" v-html="icons.moon"></div>
                    <div class="floating-icon" style="top: 20%; right: 10%; animation-delay: 2s; color: #a855f7;" v-html="icons.moon"></div>
                    <div class="floating-icon" style="bottom: 40%; right: 12%; animation-delay: 0.5s; color: #84cc16;" v-html="icons.pumpkin"></div>
                    <div class="falling-icon" style="left: 20%; animation-delay: 0s; color: #a855f7;" v-html="icons.cloud"></div>
                    <div class="falling-icon" style="left: 60%; animation-delay: 3s; color: #a855f7;" v-html="icons.moon"></div>
                    <div class="falling-icon" style="left: 80%; animation-delay: 6s; color: #ea580c;" v-html="icons.pumpkin"></div>
                </div>
                
                <div v-if="currentTheme.id === 'christmas'" class="theme-decorations">
                    <div class="falling-icon" style="left: 10%; animation-delay: 0s; color: white;" v-html="icons.snow"></div>
                    <div class="falling-icon" style="left: 30%; animation-delay: 2s; color: white;" v-html="icons.snow"></div>
                    <div class="falling-icon" style="left: 50%; animation-delay: 4s; color: white;" v-html="icons.snow"></div>
                    <div class="falling-icon" style="left: 70%; animation-delay: 1s; color: white;" v-html="icons.snow"></div>
                    <div class="falling-icon" style="left: 85%; animation-delay: 3s; color: white;" v-html="icons.snow"></div>
                    <div class="floating-icon" style="top: 15%; left: 15%; animation-delay: 0s; color: #22c55e;" v-html="icons.christmasTree"></div>
                    <div class="floating-icon" style="top: 50%; right: 10%; animation-delay: 1s; color: #22c55e;" v-html="icons.christmasTree"></div>
                    <div class="floating-icon" style="bottom: 30%; left: 8%; animation-delay: 2s; color: #dc2626;" v-html="icons.christmasTree"></div>
                    <div class="twinkling-icon" style="top: 25%; left: 25%; color: #fbbf24;" v-html="icons.sun"></div>
                    <div class="twinkling-icon" style="top: 40%; right: 20%; animation-delay: 0.5s; color: #fbbf24;" v-html="icons.sun"></div>
                </div>
                
                <div v-if="currentTheme.id === 'ailand'" class="theme-decorations">
                    <div class="floating-icon" style="top: 15%; left: 10%; animation-delay: 0s; color: #22d3ee; opacity: 0.6;" v-html="icons.robot"></div>
                    <div class="floating-icon" style="top: 40%; left: 5%; animation-delay: 1s; color: #a855f7; opacity: 0.5;" v-html="icons.robot"></div>
                    <div class="floating-icon" style="top: 25%; right: 12%; animation-delay: 2s; color: #22d3ee; opacity: 0.6;" v-html="icons.robot"></div>
                    <div class="floating-icon" style="bottom: 35%; right: 8%; animation-delay: 0.8s; color: #a855f7; opacity: 0.5;" v-html="icons.robot"></div>
                    <div class="twinkling-icon" style="top: 20%; left: 20%; color: #22d3ee;" v-html="icons.cloud"></div>
                    <div class="twinkling-icon" style="top: 60%; right: 15%; animation-delay: 0.3s; color: #a855f7;" v-html="icons.cloud"></div>
                    <div class="twinkling-icon" style="bottom: 25%; left: 30%; animation-delay: 0.7s; color: #22d3ee;" v-html="icons.cloud"></div>
                </div>
                
                <!-- Swipe indicators -->
                <div v-if="activeThemes.length > 1" class="absolute inset-y-0 left-4 flex items-center">
                    <button @click.stop="prevTheme" class="text-4xl opacity-30 hover:opacity-80 transition p-4">â—€</button>
                </div>
                <div v-if="activeThemes.length > 1" class="absolute inset-y-0 right-4 flex items-center">
                    <button @click.stop="nextTheme" class="text-4xl opacity-30 hover:opacity-80 transition p-4">â–¶</button>
                </div>
                
                <!-- Main Kai Area -->
                <div class="flex-1 flex flex-col items-center justify-center relative">
                    <!-- Greeting -->
                    <div class="absolute top-8 text-center">
                        <h1 class="text-4xl font-light opacity-80 mb-2">{{ sleepGreeting }}</h1>
                        <p class="text-xl opacity-60">{{ currentTime }}</p>
                    </div>
                    
                    <!-- Theme Badge -->
                    <div class="absolute top-24 px-4 py-2 rounded-full bg-white bg-opacity-20 backdrop-blur">
                        <span class="text-lg">{{ currentTheme.emoji }} {{ currentTheme.name }}</span>
                    </div>
                    
                    <!-- Giant Themed Kai -->
                    <div class="kai-sleep-avatar relative cursor-pointer transform hover:scale-105 transition-transform">
                        <!-- Outer glow ring (theme colored) -->
                        <div class="absolute inset-0 rounded-full blur-3xl opacity-30 animate-pulse theme-transition"
                             :style="{ backgroundColor: currentTheme.glowColor }"></div>
                        
                        <!-- Kai SVG with theme colors -->
                        <svg width="350" height="350" viewBox="0 0 200 200" class="relative z-10">
                            <!-- Body -->
                            <ellipse cx="100" cy="120" rx="60" ry="50" :fill="currentTheme.bodyColor" />
                            <ellipse cx="100" cy="120" rx="50" ry="40" :fill="currentTheme.bodyLight" />
                            
                            <!-- Eyes -->
                            <g class="kai-eyes">
                                <ellipse cx="80" cy="100" rx="12" ry="15" fill="white" />
                                <ellipse cx="80" cy="100" rx="6" ry="8" fill="black" />
                                <ellipse cx="120" cy="100" rx="12" ry="15" fill="white" />
                                <ellipse cx="120" cy="100" rx="6" ry="8" fill="black" />
                            </g>
                            
                            <!-- Smile -->
                            <path d="M 85 135 Q 100 145 115 135" stroke="white" stroke-width="3" fill="none" stroke-linecap="round" />
                            
                            <!-- Antennae (theme colored) -->
                            <g class="kai-antennae">
                                <path d="M 70 75 Q 60 40 50 30" :stroke="currentTheme.bodyColor" stroke-width="4" fill="none" stroke-linecap="round" />
                                <circle cx="50" cy="30" r="6" :fill="currentTheme.accent" />
                                <path d="M 130 75 Q 140 40 150 30" :stroke="currentTheme.bodyColor" stroke-width="4" fill="none" stroke-linecap="round" />
                                <circle cx="150" cy="30" r="6" :fill="currentTheme.accent" />
                            </g>
                            
                            <!-- Claws -->
                            <ellipse cx="45" cy="130" rx="15" ry="20" :fill="currentTheme.bodyDark" />
                            <ellipse cx="155" cy="130" rx="15" ry="20" :fill="currentTheme.bodyDark" />
                            
                            <!-- Legs -->
                            <ellipse cx="65" cy="165" rx="8" ry="15" :fill="currentTheme.bodyColor" />
                            <ellipse cx="85" cy="168" rx="8" ry="15" :fill="currentTheme.bodyColor" />
                            <ellipse cx="115" cy="168" rx="8" ry="15" :fill="currentTheme.bodyColor" />
                            <ellipse cx="135" cy="165" rx="8" ry="15" :fill="currentTheme.bodyColor" />
                        </svg>
                        
                        <!-- Tap to wake hint -->
                        <div class="absolute -bottom-16 left-1/2 transform -translate-x-1/2 text-center">
                            <p class="text-lg opacity-60 animate-pulse">Tap anywhere to wake up</p>
                        </div>
                    </div>
                    
                    <!-- Themed Sleep message -->
                    <div class="absolute bottom-32 text-center max-w-md px-4">
                        <p class="text-2xl opacity-90 italic">"{{ currentTheme.message }}"</p>
                    </div>
                    
                    <!-- Theme dots indicator -->
                    <div v-if="activeThemes.length > 1" class="absolute bottom-12 flex gap-2">
                        <button v-for="(theme, idx) in activeThemes" :key="theme.id"
                                @click.stop="setTheme(idx)"
                                class="w-3 h-3 rounded-full transition-all"
                                :class="currentThemeIndex === idx ? 'bg-white scale-125' : 'bg-white opacity-30'">
                        </button>
                    </div>
                </div>
                
                <!-- Today's Tasks Sidebar -->
                <div class="w-96 bg-black bg-opacity-40 backdrop-blur-sm p-6 flex flex-col">
                    <h2 class="text-2xl font-bold mb-6 flex items-center gap-2">
                        <span class="w-6 h-6" v-html="icons.list"></span>
                        Today's Tasks
                    </h2>
                    
                    <div class="flex-1 overflow-y-auto custom-scrollbar space-y-4">
                        <!-- Next Up -->
                        <div v-if="nextEvent" class="rounded-lg p-4 border-l-4"
                             :class="currentTheme.upNextClass">
                            <p class="text-sm opacity-70 mb-1">Up Next</p>
                            <p class="text-lg font-semibold">{{ nextEvent.title }}</p>
                            <p class="text-sm opacity-80">{{ nextEvent.start }}</p>
                        </div>
                        
                        <!-- Today's Events -->
                        <div v-if="todayEvents.length === 0" class="text-center opacity-50 py-8">
                            <div class="w-16 h-16 mx-auto mb-2" v-html="getThemeIcon('2rem')"></div>
                            <p>No events today!</p>
                            <p class="text-sm">Time to relax!</p>
                        </div>
                        
                        <div v-for="event in todayEvents" :key="event.id"
                             class="bg-white bg-opacity-10 rounded-lg p-3 flex items-center gap-3"
                             :class="{ 'opacity-50': event.isPast }">
                            <div class="w-2 h-12 rounded-full" :style="{ backgroundColor: event.color }"></div>
                            <div class="flex-1">
                                <p class="font-medium">{{ event.title }}</p>
                                <p class="text-sm opacity-70">{{ event.start }}</p>
                            </div>
                            <div v-if="event.isPast" class="flex items-center gap-1 text-xs bg-gray-600 px-2 py-1 rounded">
                                <span class="w-3 h-3" v-html="icons.check"></span>
                                Done
                            </div>
                        </div>
                    </div>
                    
                    <!-- This Day in History -->
                    <div class="mt-4 pt-4 border-t border-white border-opacity-20">
                        <h3 class="text-lg font-semibold mb-2 flex items-center gap-2">
                            <span class="w-5 h-5" v-html="icons.book"></span>
                            This Day in History
                        </h3>
                        <div class="rounded-lg p-3 bg-white bg-opacity-10 border-l-4 border-yellow-400">
                            <p class="text-sm font-medium mb-1">{{ getCountryFlag() }} {{ todayInHistory.country }}</p>
                            <p class="text-sm opacity-90">{{ todayInHistory.text }}</p>
                        </div>
                    </div>
                    
                    <!-- Quick stats -->
                    <div class="mt-6 pt-4 border-t border-white border-opacity-20">
                        <div class="flex justify-between text-sm opacity-70">
                            <span>Events today: {{ todayEvents.length }}</span>
                            <span>Completed: {{ completedEvents }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </transition>
        
        <!-- MAIN APP - Calendar View -->
        <div v-if="!sleepMode" class="h-full w-full flex flex-col">
            <!-- Header -->
            <header class="flex justify-between items-center p-4 bg-opacity-20 bg-black">
                <div class="flex items-center gap-4">
                    <div class="text-2xl font-bold">
                        {{ currentDate }}
                    </div>
                    <div class="text-xl opacity-80">
                        {{ currentTime }}
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <span class="text-sm opacity-60">Weather:</span>
                    <span class="flex items-center gap-1">
                        <span class="w-5 h-5" v-html="icons.sun"></span>
                        12Â°C
                    </span>
                    <button @click="enterSleepMode" class="ml-4 px-3 py-1 bg-white bg-opacity-10 rounded-lg hover:bg-opacity-20 transition text-sm flex items-center gap-1">
                        <span class="w-4 h-4" v-html="icons.moon"></span>
                        Sleep
                    </button>
                </div>
            </header>
            
            <!-- Main Content -->
            <main class="flex-1 flex overflow-hidden">
                <!-- Calendar View -->
                <div class="flex-1 p-4 overflow-y-auto">
                    <div class="grid grid-cols-7 gap-2 h-full">
                        <!-- Day headers -->
                        <div v-for="day in ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']" 
                             :key="day"
                             class="text-center font-bold text-lg opacity-80">
                            {{ day }}
                        </div>
                        
                        <!-- Day cells -->
                        <div v-for="(day, index) in weekDays" 
                             :key="index"
                             class="border border-white border-opacity-20 rounded-lg p-2 min-h-[120px]"
                             :class="{ 'bg-white bg-opacity-10': day.isToday }">
                            <div class="text-sm opacity-60">{{ day.date }}</div>
                            <!-- Events -->
                            <div v-for="event in day.events" 
                                 :key="event.id"
                                 class="mt-1 p-1 rounded text-xs truncate"
                                 :style="{ backgroundColor: event.color }">
                                {{ event.title }}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Kai Panel -->
                <div class="w-80 p-4 flex flex-col items-center justify-center border-l border-white border-opacity-20">
                    <!-- Kai Avatar -->
                    <div class="kai-avatar relative cursor-pointer" @click="interactWithKai">
                        <svg width="200" height="200" viewBox="0 0 200 200">
                            <ellipse cx="100" cy="120" rx="60" ry="50" fill="#3b82f6" />
                            <ellipse cx="100" cy="120" rx="50" ry="40" fill="#60a5fa" />
                            <ellipse cx="80" cy="100" rx="12" ry="15" fill="white" />
                            <ellipse cx="80" cy="100" rx="6" ry="8" fill="black" />
                            <ellipse cx="120" cy="100" rx="12" ry="15" fill="white" />
                            <ellipse cx="120" cy="100" rx="6" ry="8" fill="black" />
                            <path d="M 85 135 Q 100 145 115 135" stroke="white" stroke-width="3" fill="none" stroke-linecap="round" />
                            <path d="M 70 75 Q 60 40 50 30" stroke="#3b82f6" stroke-width="4" fill="none" stroke-linecap="round" />
                            <circle cx="50" cy="30" r="6" fill="#f59e0b" />
                            <path d="M 130 75 Q 140 40 150 30" stroke="#3b82f6" stroke-width="4" fill="none" stroke-linecap="round" />
                            <circle cx="150" cy="30" r="6" fill="#f59e0b" />
                        </svg>
                        <div class="absolute bottom-2 right-2 w-4 h-4 bg-green-500 rounded-full animate-pulse"></div>
                    </div>
                    
                    <!-- Kai Message -->
                    <div class="mt-4 p-4 bg-white bg-opacity-10 rounded-lg max-w-xs text-center">
                        <p class="text-lg whitespace-pre-line">{{ kaiMessage }}</p>
                    </div>
                    
                    <!-- Voice indicator -->
                    <div v-if="isListening" class="mt-4 flex items-center gap-2">
                        <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                        <span class="text-sm">Listening...</span>
                    </div>
                    
                    <!-- Confirmation Buttons -->
                    <div v-if="pendingEvent" class="mt-4 flex gap-3">
                        <button @click="confirmEvent" class="icon-btn px-6 py-3 bg-green-600 rounded-lg hover:bg-green-700 transition">
                            <span class="w-6 h-6" v-html="icons.check"></span>
                            Confirm
                        </button>
                        <button @click="cancelEvent" class="icon-btn px-6 py-3 bg-red-600 rounded-lg hover:bg-red-700 transition">
                            <span class="w-6 h-6" v-html="icons.x"></span>
                            Cancel
                        </button>
                    </div>
                    
                    <!-- Quick actions -->
                    <div class="mt-8 flex flex-wrap gap-2 justify-center">
                        <button @click="addEvent" class="icon-btn px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 transition">
                            <span class="w-5 h-5" v-html="icons.plus"></span>
                            Event
                        </button>
                        <button @click="dailyBrief" class="icon-btn px-4 py-2 bg-yellow-600 rounded-lg hover:bg-yellow-700 transition">
                            <span class="w-5 h-5" v-html="icons.megaphone"></span>
                            Daily Brief
                        </button>
                        <button @click="askKai" class="icon-btn px-4 py-2 bg-green-600 rounded-lg hover:bg-green-700 transition">
                            <span class="w-5 h-5" v-html="icons.microphone"></span>
                            Ask Kai
                        </button>
                        <button @click="getWordOfDay" class="icon-btn px-4 py-2 bg-purple-600 rounded-lg hover:bg-purple-700 transition">
                            <span class="w-5 h-5" v-html="icons.globe"></span>
                            Word
                        </button>
                        <button @click="interactWithKai" class="icon-btn px-4 py-2 bg-orange-500 rounded-lg hover:bg-orange-600 transition">
                            <span class="w-5 h-5" v-html="icons.surprise"></span>
                            Surprise!
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <script>
        const { createApp, ref, onMounted, computed } = Vue;
        
        createApp({
            setup() {
                const currentDate = ref('');
                const currentTime = ref('');
                const kaiMessage = ref('Hello! I am Kai. Tap me for a surprise!');
                const isListening = ref(false);
                const weekDays = ref([]);
                const sleepMode = ref(false);
                const API_URL = window.location.hostname === 'localhost' ? 'http://localhost:8000' : `http://${window.location.hostname}:8000`;
                let idleTimer = null;
                let themeRotationTimer = null;
                
                // Touch handling for swipe
                const touchStartX = ref(0);
                const touchEndX = ref(0);
                
                // Theme system
                const currentThemeIndex = ref(0);
                
                const allThemes = {
                    default: {
                        id: 'default',
                        name: 'Classic Kai',
                        emoji: 'ðŸ¦ž',
                        background: 'bg-gradient-to-br from-blue-900 via-purple-900 to-blue-900',
                        bodyColor: '#3b82f6',
                        bodyLight: '#60a5fa',
                        bodyDark: '#1e40af',
                        accent: '#f59e0b',
                        glowColor: '#3b82f6',
                        message: 'Dreaming of tomorrow adventures...',
                        upNextClass: 'bg-blue-600 bg-opacity-30 border-blue-400'
                    },
                    ireland: {
                        id: 'ireland',
                        name: 'Ireland',
                        emoji: 'â˜˜ï¸',
                        background: 'bg-gradient-to-br from-green-800 via-emerald-600 to-green-900',
                        bodyColor: '#059669',
                        bodyLight: '#34d399',
                        bodyDark: '#065f46',
                        accent: '#f97316',
                        glowColor: '#10b981',
                        message: 'Sure it is a lovely day for the craic!',
                        upNextClass: 'bg-green-600 bg-opacity-30 border-green-400'
                    },
                    spain: {
                        id: 'spain',
                        name: 'Spain',
                        emoji: 'ðŸ’ƒ',
                        background: 'bg-gradient-to-br from-red-700 via-yellow-600 to-red-800',
                        bodyColor: '#dc2626',
                        bodyLight: '#fbbf24',
                        bodyDark: '#991b1b',
                        accent: '#fbbf24',
                        glowColor: '#f59e0b',
                        message: 'Â¡OlÃ©! Viva la fiesta! Celeste would be proud!',
                        upNextClass: 'bg-red-600 bg-opacity-30 border-red-400'
                    },
                    thailand: {
                        id: 'thailand',
                        name: 'Thailand',
                        emoji: 'ðŸ™',
                        background: 'bg-gradient-to-br from-blue-600 via-purple-500 to-red-600',
                        bodyColor: '#2563eb',
                        bodyLight: '#a78bfa',
                        bodyDark: '#1e40af',
                        accent: '#fbbf24',
                        glowColor: '#fbbf24',
                        message: 'Sawasdee! Thinking of Thai temples and beaches...',
                        upNextClass: 'bg-purple-600 bg-opacity-30 border-purple-400'
                    },
                    halloween: {
                        id: 'halloween',
                        name: 'Halloween',
                        emoji: 'ðŸŽƒ',
                        background: 'bg-gradient-to-br from-orange-600 via-purple-900 to-black',
                        bodyColor: '#ea580c',
                        bodyLight: '#a855f7',
                        bodyDark: '#7c2d12',
                        accent: '#84cc16',
                        glowColor: '#a855f7',
                        message: 'Spooky scary skeletons... boo! ðŸ‘»',
                        upNextClass: 'bg-orange-600 bg-opacity-30 border-orange-400'
                    },
                    christmas: {
                        id: 'christmas',
                        name: 'Christmas',
                        emoji: 'ðŸŽ„',
                        background: 'bg-gradient-to-br from-red-800 via-green-700 to-red-900',
                        bodyColor: '#dc2626',
                        bodyLight: '#22c55e',
                        bodyDark: '#991b1b',
                        accent: '#fbbf24',
                        glowColor: '#fbbf24',
                        message: 'Ho ho ho! Merry Christmas from Kai! ðŸŽ…',
                        upNextClass: 'bg-red-600 bg-opacity-30 border-red-400'
                    },
                    ailand: {
                        id: 'ailand',
                        name: 'AI Land',
                        emoji: 'ðŸ¤–',
                        background: 'bg-gradient-to-br from-cyan-900 via-blue-800 to-purple-900',
                        bodyColor: '#0891b2',
                        bodyLight: '#22d3ee',
                        bodyDark: '#155e75',
                        accent: '#a855f7',
                        glowColor: '#22d3ee',
                        message: 'Beep boop! Calculating optimal dreams...',
                        upNextClass: 'bg-cyan-600 bg-opacity-30 border-cyan-400'
                    }
                };
                
                // For demo: show all themes
                const activeThemes = computed(() => [
                    allThemes.ireland,
                    allThemes.spain,
                    allThemes.thailand,
                    allThemes.halloween,
                    allThemes.christmas,
                    allThemes.ailand
                ]);
                
                const currentTheme = computed(() => {
                    return activeThemes.value[currentThemeIndex.value] || allThemes.default;
                });
                
                const sleepGreeting = computed(() => {
                    const hour = new Date().getHours();
                    if (hour < 12) return 'Good morning!';
                    if (hour < 18) return 'Good afternoon!';
                    return 'Good evening!';
                });
                
                // This Day in History data
                const todayInHistory = computed(() => {
                    const month = new Date().getMonth() + 1;
                    const day = new Date().getDate();
                    const dateKey = `${month}-${day}`;
                    
                    const historyData = {
                        '2-1': {
                            ireland: '1901 - The Irish Literary Theatre opens in Dublin, founded by W.B. Yeats and Lady Gregory.',
                            spain: '1485 - Jews are expelled from Andalusia by the Spanish Inquisition.',
                            thailand: '1982 - The Grand Palace in Bangkok celebrates its 200th anniversary.'
                        },
                        '2-2': {
                            ireland: '1882 - James Joyce, author of Ulysses, is born in Dublin.',
                            spain: '1141 - The Treaty of Zamora recognizes Portugal as an independent kingdom.',
                            thailand: '1989 - The first Thai satellite, Thaicom 1, is launched.'
                        },
                        '2-3': {
                            ireland: '1923 - The Irish Civil War ends with a ceasefire.',
                            spain: '1468 - The Battle of Llantada marks a victory for Ferdinand I of Aragon.',
                            thailand: '1833 - The Bowring Treaty is signed, opening Siam to foreign trade.'
                        }
                    };
                    
                    const today = historyData[dateKey] || {
                        ireland: 'Today in Irish history - a day of Celtic heritage and stories.',
                        spain: 'Today in Spanish history - another day of rich culture and passion.',
                        thailand: 'Today in Thai history - a day of Buddhist wisdom and tradition.'
                    };
                    
                    // Return based on current theme
                    if (currentTheme.value.id === 'ireland') return { country: 'Ireland', text: today.ireland, flag: 'â˜˜ï¸' };
                    if (currentTheme.value.id === 'spain') return { country: 'Spain', text: today.spain, flag: 'ðŸ’ƒ' };
                    if (currentTheme.value.id === 'thailand') return { country: 'Thailand', text: today.thailand, flag: 'ðŸ™' };
                    return { country: 'Family Heritage', text: today.ireland, flag: 'ðŸŒ' };
                });
                
                const todayEvents = computed(() => {
                    const today = weekDays.value.find(d => d.isToday);
                    if (!today) return [];
                    const now = new Date();
                    return today.events.map(e => ({
                        ...e,
                        isPast: new Date(e.fullDate + 'T' + e.start) < now
                    })).sort((a, b) => a.start.localeCompare(b.start));
                });
                
                const nextEvent = computed(() => {
                    const now = new Date();
                    return todayEvents.value.find(e => !e.isPast);
                });
                
                const completedEvents = computed(() => {
                    return todayEvents.value.filter(e => e.isPast).length;
                });
                
                const bubbleStyle = (index) => {
                    const delays = ['0s', '1s', '2s', '3s'];
                    return {
                        animationDelay: delays[index % 4]
                    };
                };
                
                const updateTime = () => {
                    const now = new Date();
                    currentDate.value = now.toLocaleDateString('en-IE', { 
                        weekday: 'long', 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    });
                    currentTime.value = now.toLocaleTimeString('en-IE', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    });
                };
                
                const loadCalendar = async () => {
                    try {
                        const response = await fetch(API_URL + '/api/calendar/week');
                        const data = await response.json();
                        weekDays.value = data.days.map(day => ({
                            date: day.day_num,
                            fullDate: day.date,
                            dayName: day.day_name,
                            isToday: day.is_today,
                            events: day.events.map(e => ({
                                id: e.id,
                                title: e.title,
                                color: e.color,
                                start: new Date(e.start).toLocaleTimeString('en-IE', {hour: '2-digit', minute:'2-digit'})
                            }))
                        }));
                    } catch (e) {
                        console.error('Failed to load calendar:', e);
                    }
                };
                
                // Greeting variations for when Kai is tapped
                const greetings = [
                    'Hey Family! ðŸ‘‹',
                    'Sawasdee Family! ðŸ™',
                    'Â¡Hola Familia! ðŸ’ƒ',
                    'Dia duit! (Hello in Irish!) â˜˜ï¸',
                    'Konnichiwa Family! ðŸŒ¸',
                    'Hey there, lovely family! ðŸ¦ž',
                    'Good to see you all! âœ¨',
                    'What is happening, family? ðŸŽ‰',
                    'Kai is here! What do you need? ðŸ¦žðŸ’ª',
                    'Hello Butler family! ðŸ’™'
                ];
                
                const interactWithKai = async () => {
                    kaiMessage.value = 'Thinking... ðŸ¤”';
                    resetIdleTimer();
                    
                    // Random greeting
                    const greeting = greetings[Math.floor(Math.random() * greetings.length)];
                    kaiMessage.value = greeting;
                    
                    // Speak the greeting
                    speakText(greeting);
                    
                    try {
                        const response = await fetch(API_URL + '/api/kai/interact', {
                            method: 'POST',
                            headers: {'Content-Type': 'application/json'},
                            body: JSON.stringify({trigger: 'tap'})
                        });
                        const data = await response.json();
                        if (data.message) {
                            kaiMessage.value = data.message;
                            speakText(data.message);
                        }
                    } catch (e) {
                        // Fallback handled above with greeting
                    }
                };
                
                // ElevenLabs TTS configuration
                const ELEVENLABS_API_KEY = 'sk_48602c9f2632085f830e5987a7314b1e032d53892b62d434';
                const ELEVENLABS_VOICE_ID = 'EST9Ui6982FZPSi7gCHi'; // ELsie voice
                
                // Text-to-speech function using ElevenLabs
                const speakText = async (text) => {
                    // Remove emojis for speech
                    const cleanText = text.replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu, '');
                    
                    try {
                        const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${ELEVENLABS_VOICE_ID}`, {
                            method: 'POST',
                            headers: {
                                'Accept': 'audio/mpeg',
                                'Content-Type': 'application/json',
                                'xi-api-key': ELEVENLABS_API_KEY
                            },
                            body: JSON.stringify({
                                text: cleanText,
                                model_id: 'eleven_monolingual_v1',
                                voice_settings: {
                                    stability: 0.5,
                                    similarity_boost: 0.75
                                }
                            })
                        });
                        
                        if (!response.ok) {
                            throw new Error('ElevenLabs API error');
                        }
                        
                        const audioBlob = await response.blob();
                        const audioUrl = URL.createObjectURL(audioBlob);
                        const audio = new Audio(audioUrl);
                        await audio.play();
                        
                        // Clean up after playback
                        audio.onended = () => {
                            URL.revokeObjectURL(audioUrl);
                        };
                    } catch (e) {
                        console.error('ElevenLabs TTS failed, falling back to browser:', e);
                        // Fallback to browser TTS
                        if ('speechSynthesis' in window) {
                            const utterance = new SpeechSynthesisUtterance(cleanText);
                            utterance.rate = 1;
                            utterance.pitch = 1.1;
                            window.speechSynthesis.speak(utterance);
                        }
                    }
                };
                
                // Daily Brief - reads today's events out loud
                const dailyBrief = () => {
                    resetIdleTimer();
                    
                    if (todayEvents.value.length === 0) {
                        const msg = 'Good morning family! You have no events scheduled for today. Enjoy your free time!';
                        kaiMessage.value = msg;
                        speakText(msg);
                        return;
                    }
                    
                    let brief = 'Good morning family! Here is your daily brief. ';
                    brief += 'You have ' + todayEvents.value.length + ' events today. ';
                    
                    const upcoming = todayEvents.value.filter(e => !e.isPast);
                    const completed = todayEvents.value.filter(e => e.isPast);
                    
                    if (completed.length > 0) {
                        brief += 'You have already completed ' + completed.length + ' events. Great job! ';
                    }
                    
                    if (upcoming.length > 0) {
                        brief += 'Coming up: ';
                        upcoming.forEach((event, idx) => {
                            brief += event.title + ' at ' + event.start;
                            if (idx < upcoming.length - 1) {
                                brief += ', then ';
                            }
                        });
                    } else if (completed.length > 0) {
                        brief += 'You have completed all your events for today. Well done!';
                    }
                    
                    kaiMessage.value = brief;
                    speakText(brief);
                };
                
                const addEvent = () => {
                    kaiMessage.value = 'Say: Hey Kai, add event for...';
                    startVoiceRecognition();
                };
                
                // Voice recognition using Web Speech API
                const recognition = ref(null);
                const pendingEvent = ref(null);
                
                const initSpeechRecognition = () => {
                    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                        recognition.value = new SpeechRecognition();
                        recognition.value.continuous = false;
                        recognition.value.interimResults = false;
                        recognition.value.lang = 'en-IE'; // Irish English
                        
                        recognition.value.onstart = () => {
                            isListening.value = true;
                            kaiMessage.value = 'ðŸŽ¤ Listening... Say something like "Kelligh has swimming tomorrow at 4pm"';
                        };
                        
                        recognition.value.onend = () => {
                            isListening.value = false;
                        };
                        
                        recognition.value.onresult = (event) => {
                            const transcript = event.results[0][0].transcript;
                            processVoiceCommand(transcript);
                        };
                        
                        recognition.value.onerror = (event) => {
                            console.error('Speech recognition error:', event.error);
                            isListening.value = false;
                            kaiMessage.value = 'âŒ Sorry, I didn\'t catch that. Tap "ðŸŽ¤ Ask Kai" to try again.';
                        };
                        
                        return true;
                    }
                    return false;
                };
                
                const startVoiceRecognition = () => {
                    resetIdleTimer();
                    
                    if (!recognition.value && !initSpeechRecognition()) {
                        kaiMessage.value = 'âŒ Voice recognition not supported in this browser.';
                        return;
                    }
                    
                    try {
                        recognition.value.start();
                    } catch (e) {
                        // Already started
                    }
                };
                
                const processVoiceCommand = async (text) => {
                    isListening.value = false;
                    kaiMessage.value = 'ðŸ¤” Processing...';
                    
                    try {
                        const response = await fetch(API_URL + '/api/voice/command', {
                            method: 'POST',
                            headers: {'Content-Type': 'application/json'},
                            body: JSON.stringify({text: text, confirmed: false})
                        });
                        
                        const data = await response.json();
                        
                        if (data.intent === 'add_event' && data.parsed_event) {
                            pendingEvent.value = data.parsed_event;
                            kaiMessage.value = data.confirmation_message + '\n\nTap âœ… to confirm or âŒ to cancel';
                            speakText(data.confirmation_message + '. Tap the checkmark to confirm or X to cancel.');
                            showConfirmationButtons();
                        } else {
                            kaiMessage.value = data.confirmation_message || 'I heard: "' + text + '"';
                            speakText(kaiMessage.value);
                        }
                    } catch (e) {
                        console.error('Voice command error:', e);
                        kaiMessage.value = 'âŒ Sorry, I had trouble understanding. Please try again.';
                    }
                };
                
                const confirmEvent = async () => {
                    if (!pendingEvent.value) return;
                    
                    kaiMessage.value = 'âœ… Adding event...';
                    
                    try {
                        const response = await fetch(API_URL + '/api/voice/command', {
                            method: 'POST',
                            headers: {'Content-Type': 'application/json'},
                            body: JSON.stringify({
                                text: pendingEvent.value.title,
                                confirmed: true
                            })
                        });
                        
                        const data = await response.json();
                        kaiMessage.value = data.confirmation_message;
                        speakText('Event added successfully!');
                        pendingEvent.value = null;
                        hideConfirmationButtons();
                        
                        // Refresh calendar
                        await loadCalendar();
                    } catch (e) {
                        kaiMessage.value = 'âŒ Could not add event. Please try again.';
                    }
                };
                
                const cancelEvent = () => {
                    pendingEvent.value = null;
                    kaiMessage.value = 'âŒ Cancelled. Tap ðŸŽ¤ Ask Kai to try again.';
                    hideConfirmationButtons();
                };
                
                // Confirmation UI helpers
                const showConfirmationButtons = () => {
                    // This will be handled by Vue template
                };
                
                const hideConfirmationButtons = () => {
                    // This will be handled by Vue template
                };
                
                const askKai = () => {
                    startVoiceRecognition();
                };
                
                const getWordOfDay = async () => {
                    resetIdleTimer();
                    try {
                        const response = await fetch(API_URL + '/api/kai/interact', {
                            method: 'POST',
                            headers: {'Content-Type': 'application/json'},
                            body: JSON.stringify({trigger: 'word'})
                        });
                        const data = await response.json();
                        if (data.type === 'word_of_the_day') {
                            kaiMessage.value = data.language + ' Word: "' + data.word + '" means "' + data.english + '" (' + data.pronunciation + ')';
                        }
                    } catch (e) {
                        kaiMessage.value = 'Word of the day: Agua (Spanish) = Water ðŸ’§';
                    }
                };
                
                const nextTheme = () => {
                    currentThemeIndex.value = (currentThemeIndex.value + 1) % activeThemes.value.length;
                };
                
                const prevTheme = () => {
                    currentThemeIndex.value = (currentThemeIndex.value - 1 + activeThemes.value.length) % activeThemes.value.length;
                };
                
                const setTheme = (index) => {
                    currentThemeIndex.value = index;
                };
                
                const handleTouchStart = (e) => {
                    touchStartX.value = e.changedTouches[0].screenX;
                };
                
                const handleTouchEnd = (e) => {
                    touchEndX.value = e.changedTouches[0].screenX;
                    handleSwipe();
                };
                
                const handleSwipe = () => {
                    const swipeThreshold = 50;
                    const diff = touchStartX.value - touchEndX.value;
                    
                    if (Math.abs(diff) > swipeThreshold) {
                        if (diff > 0) {
                            nextTheme();
                        } else {
                            prevTheme();
                        }
                    }
                };
                
                const enterSleepMode = () => {
                    sleepMode.value = true;
                    currentThemeIndex.value = 0;
                    
                    // Auto-rotate themes every 10 seconds
                    if (themeRotationTimer) clearInterval(themeRotationTimer);
                    themeRotationTimer = setInterval(() => {
                        if (sleepMode.value && activeThemes.value.length > 1) {
                            nextTheme();
                        }
                    }, 10000);
                };
                
                const wakeUp = () => {
                    sleepMode.value = false;
                    if (themeRotationTimer) clearInterval(themeRotationTimer);
                    resetIdleTimer();
                    kaiMessage.value = 'Good to see you!';
                };
                
                const resetIdleTimer = () => {
                    if (idleTimer) clearTimeout(idleTimer);
                    idleTimer = setTimeout(() => {
                        if (!sleepMode.value) enterSleepMode();
                    }, 120000);
                };
                
                // Icon system
                const icons = ref(KAI_ICONS || {});
                
                const getThemeIcon = (size = '4rem') => {
                    const themeIcons = {
                        ireland: icons.value.shamrock,
                        spain: icons.value.dancer,
                        thailand: icons.value.temple,
                        halloween: icons.value.pumpkin,
                        christmas: icons.value.christmasTree,
                        ailand: icons.value.robot,
                        default: icons.value.sun
                    };
                    const icon = themeIcons[currentTheme.value.id] || icons.value.sun;
                    return icon ? `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="currentColor">${icon}</svg>` : '';
                };
                
                const getCountryFlag = () => {
                    const flags = {
                        ireland: 'ðŸ‡®ðŸ‡ª',
                        spain: 'ðŸ‡ªðŸ‡¸',
                        thailand: 'ðŸ‡¹ðŸ‡­'
                    };
                    return flags[currentTheme.value.id] || 'ðŸŒ';
                };
                
                onMounted(() => {
                    updateTime();
                    setInterval(updateTime, 1000);
                    loadCalendar();
                    setInterval(loadCalendar, 300000);
                    resetIdleTimer();
                    
                    document.addEventListener('click', resetIdleTimer);
                    document.addEventListener('touchstart', resetIdleTimer);
                });
                
                return {
                    currentDate,
                    currentTime,
                    weekDays,
                    kaiMessage,
                    isListening,
                    sleepMode,
                    sleepGreeting,
                    todayEvents,
                    nextEvent,
                    completedEvents,
                    currentTheme,
                    currentThemeIndex,
                    activeThemes,
                    pendingEvent,
                    icons,
                    getThemeIcon,
                    getCountryFlag,
                    bubbleStyle,
                    todayInHistory,
                    interactWithKai,
                    addEvent,
                    askKai,
                    getWordOfDay,
                    dailyBrief,
                    confirmEvent,
                    cancelEvent,
                    enterSleepMode,
                    wakeUp,
                    nextTheme,
                    prevTheme,
                    setTheme,
                    handleTouchStart,
                    handleTouchEnd
                };
            }
        }).mount('#app');
    </script>
</body>
</html>